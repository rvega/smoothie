<!DOCTYPE html>

<html>

<head>
	<meta charset="UTF-8"> 
	<style type="text/css">
		body {
			background: #999;
			margin: 0em;
		}

		pre {
			margin: 1em;
		}

		h1 {
			font-size: 2em;
			margin: 0.5em;
		}

		div, p {
			margin: 1em;
			overflow: hidden;
		}

		.Resolve {
			background: #fdd;
		}
		.Module {
			background: #dfd;
		}
		.Bundle {
			background: #ddf;
		}
		.Cache {
			background: #ffd;
		}
	</style>
	<script type="text/javascript" src="../require.js"></script>
	<title>Pixels vs. Bytes | Jay Example: require()</title>
</head>

<body class="Grid">
	<div class="Resolve">
		<h1>Module identifier => module object</h1>
		<pre><script type="text/javascript">
		var parser = document.createElement('A');
		parser.href = '/foo/bar/./././baz///moo/maa/../../../mee/gee';
		document.writeln(parser.href);

		mname = 'module';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname)));
		mname = './module';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname)));
		mname = '../module';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname)));

		mname = 'module.js';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname))); 
		var mname = '/module.js';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname)));
		mname = './module.js';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname))); 
		mname = '../module.js';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname)));

		mname = '../foo/bar/./././baz///moo/maa/../../../mee/gee';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname)));
		mname = 'foo/bar//baz///moo////maa/mee';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname)));
		mname = '/home/torben/PixelsVsBytes/Repositories///Jay/../../..';
		document.writeln('require.resolve('+mname+') -> '+JSON.stringify(require.resolve(mname)));
		</script></pre>
	</div>
	<div class="Module">
		<h1>JavaScript module (asynchronous)</h1>
		<pre id="asyncModulePre"><script type="text/javascript">
		require('./module.js', function(mod) {
			var node = document.getElementById('asyncModulePre');
			node.innerHTML += mod.greet()+'\n';
		});
		</script></pre>
	</div>
	<div class="Module">
		<h1>JavaScript module (synchronous)</h1>
		<pre><script type="text/javascript">
		var mod = require('module');
		document.writeln(mod.greet());
		mod.worldstr = 'module';
		document.write(mod.greet());
		</script></pre>
	</div>
	<div class="Module">
		<h1>JavaScript module (cached via id)</h1>
		<pre><script type="text/javascript">
		var mod = require('module');
		document.writeln(mod.greet());
		</script></pre>
	</div>
	<div class="Module">
		<h1>JavaScript module (synchronous, relative)</h1>
		<pre><script type="text/javascript">
		var main = require('./relative/main');
		document.writeln(main.greet());
		</script></pre>
	</div>
	<div class="Bundle">
		<h1>JavaScript bundle (asynchronous)</h1>
		<pre id="asyncBundlePre"><script type="text/javascript">
		require('bundle');
		require('hello', function(mod) {
			var node = document.getElementById('asyncBundlePre');
			node.innerHTML += mod.greet()+'\n';
		});
		require('world', function(mod) {
			var node = document.getElementById('asyncBundlePre');
			node.innerHTML += mod.greet()+'\n';
		});
		</script></pre>
	</div>
	<div class="Bundle">
		<h1>JavaScript bundle (synchronous)</h1>
		<pre><script type="text/javascript">
		var hello = require('hello');
		document.writeln(hello.greet());
		hello.hellostr = 'hej';
		document.writeln(hello.greet());
		var world = require('world');
		document.writeln(world.greet());
		world.worldstr = 'verden';
		document.writeln(world.greet());
		</script></pre>
	</div>
	<div class="Bundle">
		<h1>JavaScript bundle (cached via id)</h1>
		<pre><script type="text/javascript">
		var hello = require('hello');
		document.writeln(hello.greet());
		var world = require('world');
		document.writeln(world.greet());
		</script></pre>
	</div>
	<div class="Bundle">
		<h1>JavaScript bundle (deep)</h1>
		<pre><script type="text/javascript">
		require('relative/water');
		var fish = require('fish');
		document.writeln(fish.greet());
		var shark = require('relative/shark');
		document.writeln(shark.greet());
		var whale = require('whale');
		document.writeln(whale.greet());
		var dolphin = require('ocean/dolphin');
		document.writeln(dolphin.greet());
		</script></pre>
	</div>
</body>

</html>

